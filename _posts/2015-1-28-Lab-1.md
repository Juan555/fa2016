---
layout: default
title: "Lab 1: Development Environment and Server Configuration"
<!-- permalink: lab1.html -->
---

###Setting up a develpoment Environment
In this lab we will set up a development environment for use throughout the class. Our aim is to develop applications in an environment as close as possible to the final server our code is going to be deployed on. Aslo, having the same development environment for all students in class helps us debug your code faster.

The following has been tested for Mac OS X. We anticipate that steps 1 and 2 might be different for other operating systems. You are responsible for reading the documentation in such cases.

1 - Install [VirtualBox](https://www.virtualbox.org/)

2 - Install [Vagrant](https://www.vagrantup.com/)

3 -  Clone the [vagrant-dev repository](https://github.com/uiuc-web-programming/vagrant-dev.git) from the [class github account](https://github.com/uiuc-web-programming/) to your machine. You are encouraged to use the command line for interacting with git and github. So, use the following command:

```bash 
git clone https://github.com/uiuc-web-programming/vagrant-dev.git
```
As an alternative you can use a graphical client such as the [Github Mac Client](https://mac.github.com/)

4 - Change to the `vagrant-dev` directory and inspect the Vagrantfile. In it we have defined what operating system we want for our virtual machine (Ubuntu in our case) and have also specified what ports of the virtual/guest machine (Ubuntu) should be forwarded to what ports of the host machine (OS X)

```bash
cd vagrant-dev
```

5 - Boot up the virtual machine:

```bash
vagrant up
```
6 - SSH into the virtual machine once it has booted up:

```bash
vagrant ssh
```

7 - The `vagrant-dev` folder on your host machine is mounted as `/vagrant` in your guest machine. Change your directory to this folder. This folder remains synced between the two operating systems and is the ideal place to put your projects. That way  you can edit files using the editor on OS X and run them from the terminal in Ubuntu. Now run the `install.sh` script present in that folder.

```bash
cd /vagrant
sh install.sh
source ~/.profile
```
 8 - *Fork* the [MP-1 starter code](https://github.com/uiuc-web-programming/mp1_starter) from the class github repo (by clicking on the fork button on the top right) and inspect the files inside. 

```bash
git clone https://github.com/your-github-username/mp1_starter
cd mp1_starter
```
10 - Install the NPM packages needed for the project. This reads the `package.json` files and installs the packages in the `node_packages` folder.

```bash
npm install
```

11 - Install front-end packages (only jQuery in our case) using bower. This reads the `bower.json` files and installs the packages in the `public/lib` folder.

```bash
bower install
```

12 - Now use grunt to compile the scss files. The output will be saved in `public/css` folder

```bash
grunt compass
```
13 - Now use grunt to uglify the javascript files. The output will be saved in `public/js` folder

```bash
grunt uglify
```

14 - Serve the files using grunt.

```bash
grunt
```
15 - Open your browser and point it to `localhost:3000`. You should see the served webpage there. If you leave grunt running and now make changes to the files in the `scss` folder, the `js` folder and the `public/index.html` file, you will see the webpage reload automatically. This is done through [grunt livereload](https://github.com/gruntjs/grunt-contrib-watch#optionslivereload). This way you can code away on your code editor while seeing changes in the browser side by side.

16 - Now implement MP1 by writing your code in the `scss` folder, the `js` folder and the `public/index.html` file. Push changes to your forked repo.

###Setting up the Server

1 - Get [Github Student Developer Pack](https://education.github.com/pack) and get the $100 in platform credit for [DigitalOcean](https://www.digitalocean.com/) 

2 - [Create a droplet](https://www.digitalocean.com/community/tutorials/how-to-create-your-first-digitalocean-droplet-virtual-server) on DigitalOcean and log in to it. Yous should also [setup ssh-keys](https://www.digitalocean.com/community/tutorials/how-to-set-up-ssh-keys--2) for easy and secure logins in the future.

3 - Get the install script from our vagrant-dev repo and run it

```bash
wget https://raw.githubusercontent.com/uiuc-web-programming/vagrant-dev/master/install.sh
sh install.sh
```

4 - Create a mp1 folder on the server and upload the `app.js` file and the `public` folder from the mp1_starter on your local machine (you can also take these from your forked mp1-starter repo if you have pushed all changes to it).

```bash
mkdir mp1
exit #logout
scp path_to_mp1_starter/app.js login_name@droplet_ip:~/mp1
scp -r path_to_mp1_starter/public login_name@droplet_ip:~/mp1
ssh login_name@droplet_ip  # log back in
```

5 - Start screen and serve the files by running the expressjs server. 

```bash
screen
cd mp1
node app.js
```
6 - The webpage should be up at http://droplet_ip:3000 . Check that in your browser.

7 - Detach from screen and logout

```
ctrl+a followerd by d
exit
```

8 - Keep the server running till MP 1 is graded. To stop the server in the future login to your droplet, reattach to screen and stop the server

```
ssh login_name@droplet_ip  # log back in
screen -r
ctrl+d
exit # exit from screen
exit # exit from server
```



